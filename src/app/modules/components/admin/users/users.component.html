<div class="app-container">
  <div class="section-title"><h1>Administrimit - Menaxhimi i Përdoruesve</h1>
    <p>
      Kjo seksion është e rezervuar për administratorin e sistemit. Nga këtu mund të menaxhoni të gjithë përdoruesit e
      regjistruar,
      të modifikoni të dhënat e tyre, rolet dhe të verifikoni informacionin e lidhur. Përdorni me kujdes funksionet e
      modifikimit dhe fshirjes.
    </p>
  </div>

  <div class="search-bar-container">
    <mat-form-field appearance="outline" class="search-field">
      <mat-label>Kërko përdorues</mat-label>
      <input
        matInput
        placeholder="Shkruaj email, emër, mbiemër..."
        (keyup)="applyFilter($event)"
      >
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
  </div>

  <div class="modern-table-container">
    <table mat-table [dataSource]="dataSource" matSort>

      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
        <td mat-cell *matCellDef="let user">{{ user.email }}</td>
      </ng-container>

      <ng-container matColumnDef="firstName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>First Name</th>
        <td mat-cell *matCellDef="let user">{{ user.firstName }}</td>
      </ng-container>

      <ng-container matColumnDef="lastName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</th>
        <td mat-cell *matCellDef="let user">{{ user.lastName }}</td>
      </ng-container>

      <ng-container matColumnDef="role">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Role</th>
        <td mat-cell *matCellDef="let user">{{ user.role }}</td>
      </ng-container>

      <ng-container matColumnDef="school">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>School</th>
        <td mat-cell *matCellDef="let user">{{ user.school || '-' }}</td>
      </ng-container>

      <ng-container matColumnDef="city">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>City</th>
        <td mat-cell *matCellDef="let user">{{ user.city || '-' }}</td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let user">
          <button mat-icon-button [matMenuTriggerFor]="menu">
            <span>Veprimet</span>
            <mat-icon>expand_more</mat-icon>
          </button>
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="onEdit(user)">
              <mat-icon>edit</mat-icon>
              <span>Modifiko</span>
            </button>
            <button mat-menu-item (click)="onDelete(user)">
              <mat-icon>delete</mat-icon>
              <span>Elimino</span>
            </button>
          </mat-menu>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
  <mat-paginator
    #paginator
    showFirstLastButtons
    [length]="length"
    [pageSize]="pageSize"
    [pageIndex]="pageNumber"
    [pageSizeOptions]="pageSizeOptions"
    (page)="onPageChange($event)">
  </mat-paginator>
</div>
